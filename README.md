# Terraform-aws-aurora

# Terraform AWS Cloud aurora DB Module

## Table of Contents

- [Introduction](#introduction)
- [Usage](#usage)
- [Examples](#Examples)
- [Author](#Author)
- [License](#license)
- [Inputs](#inputs)
- [Outputs](#outputs)

## Introduction

This Terraform module creates an AWS Aurora Database Service- AWS (DB) along with additional configuration options.

## Usage

To use this module, you can include it in your Terraform configuration. Here's an example of how to use it:

## Examples

## Example: aurora-mysql

```hcl
module "aurora-mysql" {
  source          = "opszero/aurora/aws"
  version         = "1.0.0"
  name            = local.name
  environment     = local.environment
  engine          = "aurora-mysql"
  engine_version  = "8.0"
  master_username = "root"
  database_name   = "test"
  sg_ids          = []
  allowed_ports   = [3306]
  allowed_ip      = [module.vpc.vpc_cidr_block]
  instances = {
    1 = {
      instance_class      = "db.r5.large"
      publicly_accessible = true
    }
    2 = {
      identifier          = "mysql-static-1"
      instance_class      = "db.r5.2xlarge"
      publicly_accessible = true
    }
    3 = {
      identifier     = "mysql-excluded-1"
      instance_class = "db.r5.xlarge"
      promotion_tier = 15
    }
  }

  apply_immediately   = true
  skip_final_snapshot = true
  subnets             = module.subnets.public_subnet_id
  vpc_id              = module.vpc.id

  create_db_cluster_parameter_group = true
  db_cluster_parameter_group_name   = "aurora-mysql"
  db_cluster_parameter_group_family = "aurora-mysql8.0"
  db_cluster_parameter_group_parameters = [
    {
      name         = "connect_timeout"
      value        = 120
      apply_method = "immediate"
    }, {
      name         = "innodb_lock_wait_timeout"
      value        = 300
      apply_method = "immediate"
    }, {
      name         = "log_output"
      value        = "FILE"
      apply_method = "immediate"
    }, {
      name         = "max_allowed_packet"
      value        = "67108864"
      apply_method = "immediate"
    }, {
      name         = "binlog_format"
      value        = "ROW"
      apply_method = "pending-reboot"
    }, {
      name         = "log_bin_trust_function_creators"
      value        = 1
      apply_method = "immediate"
    }, {
      name         = "require_secure_transport"
      value        = "ON"
      apply_method = "immediate"
    }, {
      name         = "tls_version"
      value        = "TLSv1.2"
      apply_method = "pending-reboot"
    }
  ]

  create_db_parameter_group      = true
  db_parameter_group_name        = "aurora-mysql"
  db_parameter_group_family      = "aurora-mysql8.0"
  db_parameter_group_description = "mysql aurora example DB parameter group"
  db_parameter_group_parameters = [
    {
      name         = "connect_timeout"
      value        = 60
      apply_method = "immediate"
    }, {
      name         = "general_log"
      value        = 0
      apply_method = "immediate"
    }, {
      name         = "innodb_lock_wait_timeout"
      value        = 300
      apply_method = "immediate"
    }, {
      name         = "long_query_time"
      value        = 5
      apply_method = "immediate"
    }, {
      name         = "max_connections"
      value        = 2000
      apply_method = "immediate"
    }, {
      name         = "slow_query_log"
      value        = 1
      apply_method = "immediate"
    }, {
      name         = "log_bin_trust_function_creators"
      value        = 1
      apply_method = "immediate"
    }
  ]

  enabled_cloudwatch_logs_exports = ["audit", "error", "general", "slowquery"]
}
```

## Example: aurora-mysql-serverless

```hcl
module "aurora_mysql" {
  source          = "opszero/aurora/aws"
  version         = "1.0.0"
  name            = local.name
  environment     = local.environment
  engine          = "aurora-mysql"
  engine_mode     = "provisioned"
  engine_version  = "8.0"
  master_username = "root"
  database_name   = "test"
  sg_ids          = []
  allowed_ports   = [3306]
  allowed_ip      = [module.vpc.vpc_cidr_block]
  vpc_id          = module.vpc.id
  subnets         = module.subnets.public_subnet_id

  monitoring_interval = 60
  apply_immediately   = true
  skip_final_snapshot = true
  serverlessv2_scaling_configuration = {
    min_capacity = 2
    max_capacity = 10
  }
  instance_class = "db.serverless"
  instances = {
    one = {
      publicly_accessible = true
    }
    two = {
      publicly_accessible = true
    }
  }

}
```

## Example: aurora-postgresql

```hcl
module "aurora-postgresql" {
  source      = "opszero/aurora/aws"
  version     = "1.0.0"
  name        = local.name
  environment = local.environment
  label_order = local.label_order

  engine          = "aurora-postgresql"
  engine_version  = "16.1"
  master_username = "root"
  database_name   = "postgres"
  storage_type    = "aurora-iopt1"
  allowed_ports   = [5432]
  allowed_ip      = ["0.0.0.0/0"]
  subnets         = module.subnets.public_subnet_id
  vpc_id          = module.vpc.id
  instances = {
    1 = {
      instance_class      = "db.t4g.medium"
      publicly_accessible = true
    }
    2 = {
      identifier          = "static-member-1"
      instance_class      = "db.t4g.large"
      publicly_accessible = true
    }
    3 = {
      identifier          = "excluded-member-1"
      instance_class      = "db.t3.medium"
      promotion_tier      = 15
      publicly_accessible = true

    }
  }

  apply_immediately                      = true
  skip_final_snapshot                    = true
  create_db_cluster_parameter_group      = true
  db_cluster_parameter_group_name        = "aurora-postgres"
  db_cluster_parameter_group_family      = "aurora-postgresql16"
  db_cluster_parameter_group_description = "aurora postgres example cluster parameter group"
  db_cluster_parameter_group_parameters = [
    {
      name         = "log_min_duration_statement"
      value        = 4000
      apply_method = "immediate"
    },
    {
      name         = "rds.force_ssl"
      value        = 1
      apply_method = "immediate"
    }
  ]
  create_db_parameter_group      = true
  db_parameter_group_name        = "aurora-postgre"
  db_parameter_group_family      = "aurora-postgresql16"
  db_parameter_group_description = "postgres aurora example DB parameter group"
  db_parameter_group_parameters = [
    {
      name         = "log_min_duration_statement"
      value        = 4000
      apply_method = "immediate"
    }
  ]
  enabled_cloudwatch_logs_exports = ["postgresql"]

  ##-------------------------------------
  ## RDS PROXY
  ##-------------------------------------
  create_db_proxy  = true
  engine_family    = "POSTGRESQL"
  proxy_subnet_ids = module.subnets.public_subnet_id
  auth = [
    {
      auth_scheme = "SECRETS"
      description = "example"
      iam_auth    = "DISABLED"
      secret_arn  = module.aurora-postgresql.cluster_master_user_secret[0].secret_arn
    }
  ]
}
```

## Example: aurora-postgresql-serverless

```hcl
module "aurora_postgresql" {
  source          = "opszero/aurora/aws"
  version         = "1.0.0"
  name            = local.name
  environment     = local.environment
  engine          = "aurora-postgresql"
  engine_mode     = "provisioned"
  engine_version  = "14.5"
  master_username = "root"
  database_name   = "postgres"
  vpc_id          = module.vpc.id
  subnets         = module.subnets.public_subnet_id
  allowed_ports   = [5432]
  allowed_ip      = [module.vpc.vpc_cidr_block, ]

  monitoring_interval = 60
  apply_immediately   = true
  skip_final_snapshot = true
  serverlessv2_scaling_configuration = {
    min_capacity = 2
    max_capacity = 10
  }
  instance_class = "db.serverless"
  instances = {
    one = {
      publicly_accessible = true

    }
    two = {
      publicly_accessible = true

    }
  }
}
```

## Example

For detailed examples on how to use this module, please refer to the [examples](https://github.com/opszero/terraform-aws-aurora/tree/master/examples) directory within this repository.

## Author

Your Name Replace **MIT** and **opszero** with the appropriate license and your information. Feel free to expand this README with additional details or usage instructions as needed for your specific use case.

## License

This project is licensed under the **MIT** License - see the [LICENSE](https://github.com/opszero/terraform-aws-aurora/blob/master/LICENSE) file for details.

<!-- BEGIN_TF_DOCS -->

## Requirements

| Name                                                                     | Version   |
| ------------------------------------------------------------------------ | --------- |
| <a name="requirement_terraform"></a> [terraform](#requirement_terraform) | >= 1.6.6  |
| <a name="requirement_aws"></a> [aws](#requirement_aws)                   | >= 5.31.0 |
| <a name="requirement_random"></a> [random](#requirement_random)          | >= 3.5.1  |

## Providers

| Name                                                      | Version   |
| --------------------------------------------------------- | --------- |
| <a name="provider_aws"></a> [aws](#provider_aws)          | >= 5.31.0 |
| <a name="provider_random"></a> [random](#provider_random) | >= 3.5.1  |

## Modules

| Name                                                  | Source             | Version |
| ----------------------------------------------------- | ------------------ | ------- |
| <a name="module_labels"></a> [labels](#module_labels) | opszero/labels/aws | 1.0.1   |

## Resources

| Name                                                                                                                                                             | Type        |
| ---------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------- |
| [aws_appautoscaling_policy.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/appautoscaling_policy)                              | resource    |
| [aws_appautoscaling_target.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/appautoscaling_target)                              | resource    |
| [aws_db_parameter_group.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/db_parameter_group)                                    | resource    |
| [aws_db_proxy.proxy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/db_proxy)                                                       | resource    |
| [aws_db_proxy_default_target_group.proxy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/db_proxy_default_target_group)             | resource    |
| [aws_db_proxy_endpoint.proxy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/db_proxy_endpoint)                                     | resource    |
| [aws_db_proxy_target.proxy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/db_proxy_target)                                         | resource    |
| [aws_db_subnet_group.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/db_subnet_group)                                       | resource    |
| [aws_iam_role.proxy_iam_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role)                                              | resource    |
| [aws_iam_role.rds_enhanced_monitoring](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role)                                     | resource    |
| [aws_iam_role_policy.proxy_iam_policy](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy)                              | resource    |
| [aws_iam_role_policy_attachment.rds_enhanced_monitoring](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/iam_role_policy_attachment) | resource    |
| [aws_rds_cluster.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/rds_cluster)                                                  | resource    |
| [aws_rds_cluster_endpoint.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/rds_cluster_endpoint)                                | resource    |
| [aws_rds_cluster_instance.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/rds_cluster_instance)                                | resource    |
| [aws_rds_cluster_parameter_group.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/rds_cluster_parameter_group)                  | resource    |
| [aws_rds_cluster_role_association.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/rds_cluster_role_association)                | resource    |
| [aws_security_group.default](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group)                                         | resource    |
| [aws_security_group_rule.egress](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                                | resource    |
| [aws_security_group_rule.egress_ipv6](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                           | resource    |
| [aws_security_group_rule.ingress](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/security_group_rule)                               | resource    |
| [random_id.password](https://registry.terraform.io/providers/hashicorp/random/latest/docs/resources/id)                                                          | resource    |
| [aws_iam_policy_document.monitoring_rds_assume_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document)         | data source |
| [aws_iam_policy_document.proxy_assume_role](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document)                  | data source |
| [aws_iam_policy_document.proxy_iam_policy_permissions](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/iam_policy_document)       | data source |
| [aws_partition.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/partition)                                                | data source |
| [aws_region.current](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/region)                                                      | data source |

## Inputs

| Name                                                                                                                                                               | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Type                | Default                                                              | Required |
| ------------------------------------------------------------------------------------------------------------------------------------------------------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------- | -------------------------------------------------------------------- | :------: |
| <a name="input_allocated_storage"></a> [allocated_storage](#input_allocated_storage)                                                                               | The amount of storage in gibibytes (GiB) to allocate to each DB instance in the Multi-AZ DB cluster. (This setting is required to create a Multi-AZ DB cluster)                                                                                                                                                                                                                                                                                                                                       | `number`            | `null`                                                               |    no    |
| <a name="input_allow_major_version_upgrade"></a> [allow_major_version_upgrade](#input_allow_major_version_upgrade)                                                 | Enable to allow major engine version upgrades when changing engine versions. Defaults to `false`                                                                                                                                                                                                                                                                                                                                                                                                      | `bool`              | `false`                                                              |    no    |
| <a name="input_allowed_ip"></a> [allowed_ip](#input_allowed_ip)                                                                                                    | List of allowed ip.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `list(any)`         | `[]`                                                                 |    no    |
| <a name="input_allowed_ports"></a> [allowed_ports](#input_allowed_ports)                                                                                           | List of allowed ingress ports                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `list(any)`         | `[]`                                                                 |    no    |
| <a name="input_apply_immediately"></a> [apply_immediately](#input_apply_immediately)                                                                               | Specifies whether any cluster modifications are applied immediately, or during the next maintenance window. Default is `false`                                                                                                                                                                                                                                                                                                                                                                        | `bool`              | `null`                                                               |    no    |
| <a name="input_auth"></a> [auth](#input_auth)                                                                                                                      | n/a                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `any`               | `{}`                                                                 |    no    |
| <a name="input_auto_minor_version_upgrade"></a> [auto_minor_version_upgrade](#input_auto_minor_version_upgrade)                                                    | Indicates that minor engine upgrades will be applied automatically to the DB instance during the maintenance window. Default `true`                                                                                                                                                                                                                                                                                                                                                                   | `bool`              | `null`                                                               |    no    |
| <a name="input_autoscaling_enabled"></a> [autoscaling_enabled](#input_autoscaling_enabled)                                                                         | Determines whether autoscaling of the cluster read replicas is enabled                                                                                                                                                                                                                                                                                                                                                                                                                                | `bool`              | `false`                                                              |    no    |
| <a name="input_autoscaling_max_capacity"></a> [autoscaling_max_capacity](#input_autoscaling_max_capacity)                                                          | Maximum number of read replicas permitted when autoscaling is enabled                                                                                                                                                                                                                                                                                                                                                                                                                                 | `number`            | `2`                                                                  |    no    |
| <a name="input_autoscaling_min_capacity"></a> [autoscaling_min_capacity](#input_autoscaling_min_capacity)                                                          | Minimum number of read replicas permitted when autoscaling is enabled                                                                                                                                                                                                                                                                                                                                                                                                                                 | `number`            | `0`                                                                  |    no    |
| <a name="input_autoscaling_policy_name"></a> [autoscaling_policy_name](#input_autoscaling_policy_name)                                                             | Autoscaling policy name                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `string`            | `"target-metric"`                                                    |    no    |
| <a name="input_autoscaling_scale_in_cooldown"></a> [autoscaling_scale_in_cooldown](#input_autoscaling_scale_in_cooldown)                                           | Cooldown in seconds before allowing further scaling operations after a scale in                                                                                                                                                                                                                                                                                                                                                                                                                       | `number`            | `300`                                                                |    no    |
| <a name="input_autoscaling_scale_out_cooldown"></a> [autoscaling_scale_out_cooldown](#input_autoscaling_scale_out_cooldown)                                        | Cooldown in seconds before allowing further scaling operations after a scale out                                                                                                                                                                                                                                                                                                                                                                                                                      | `number`            | `300`                                                                |    no    |
| <a name="input_autoscaling_target_connections"></a> [autoscaling_target_connections](#input_autoscaling_target_connections)                                        | Average number of connections threshold which will initiate autoscaling. Default value is 70% of db.r4/r5/r6g.large's default max_connections                                                                                                                                                                                                                                                                                                                                                         | `number`            | `700`                                                                |    no    |
| <a name="input_autoscaling_target_cpu"></a> [autoscaling_target_cpu](#input_autoscaling_target_cpu)                                                                | CPU threshold which will initiate autoscaling                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `number`            | `70`                                                                 |    no    |
| <a name="input_availability_zones"></a> [availability_zones](#input_availability_zones)                                                                            | List of EC2 Availability Zones for the DB cluster storage where DB cluster instances can be created. RDS automatically assigns 3 AZs if less than 3 AZs are configured, which will show as a difference requiring resource recreation next Terraform apply                                                                                                                                                                                                                                            | `list(string)`      | `null`                                                               |    no    |
| <a name="input_backtrack_window"></a> [backtrack_window](#input_backtrack_window)                                                                                  | The target backtrack window, in seconds. Only available for `aurora` engine currently. To disable backtracking, set this value to 0. Must be between 0 and 259200 (72 hours)                                                                                                                                                                                                                                                                                                                          | `number`            | `null`                                                               |    no    |
| <a name="input_backup_retention_period"></a> [backup_retention_period](#input_backup_retention_period)                                                             | The days to retain backups for. Default `7`                                                                                                                                                                                                                                                                                                                                                                                                                                                           | `number`            | `7`                                                                  |    no    |
| <a name="input_ca_cert_identifier"></a> [ca_cert_identifier](#input_ca_cert_identifier)                                                                            | The identifier of the CA certificate for the DB instance                                                                                                                                                                                                                                                                                                                                                                                                                                              | `string`            | `null`                                                               |    no    |
| <a name="input_cidr_blocks"></a> [cidr_blocks](#input_cidr_blocks)                                                                                                 | equal to 0. The supported values are defined in the IpProtocol argument on the IpPermission API reference                                                                                                                                                                                                                                                                                                                                                                                             | `list(string)`      | <pre>[<br> "0.0.0.0/0"<br>]</pre>                                    |    no    |
| <a name="input_cluster_members"></a> [cluster_members](#input_cluster_members)                                                                                     | List of RDS Instances that are a part of this cluster                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `list(string)`      | `null`                                                               |    no    |
| <a name="input_cluster_tags"></a> [cluster_tags](#input_cluster_tags)                                                                                              | A map of tags to add to only the cluster. Used for AWS Instance Scheduler tagging                                                                                                                                                                                                                                                                                                                                                                                                                     | `map(string)`       | `{}`                                                                 |    no    |
| <a name="input_cluster_timeouts"></a> [cluster_timeouts](#input_cluster_timeouts)                                                                                  | Create, update, and delete timeout configurations for the cluster                                                                                                                                                                                                                                                                                                                                                                                                                                     | `map(string)`       | `{}`                                                                 |    no    |
| <a name="input_connection_borrow_timeout"></a> [connection_borrow_timeout](#input_connection_borrow_timeout)                                                       | (Optional) The number of seconds for a proxy to wait for a connection to become available in the connection pool. Only applies when the proxy has opened its maximum number of connections and all connections are busy with client sessions.                                                                                                                                                                                                                                                         | `number`            | `null`                                                               |    no    |
| <a name="input_copy_tags_to_snapshot"></a> [copy_tags_to_snapshot](#input_copy_tags_to_snapshot)                                                                   | Copy all Cluster `tags` to snapshots                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `bool`              | `null`                                                               |    no    |
| <a name="input_create"></a> [create](#input_create)                                                                                                                | Whether cluster should be created (affects nearly all resources)                                                                                                                                                                                                                                                                                                                                                                                                                                      | `bool`              | `true`                                                               |    no    |
| <a name="input_create_db_cluster_parameter_group"></a> [create_db_cluster_parameter_group](#input_create_db_cluster_parameter_group)                               | Determines whether a cluster parameter should be created or use existing                                                                                                                                                                                                                                                                                                                                                                                                                              | `bool`              | `false`                                                              |    no    |
| <a name="input_create_db_parameter_group"></a> [create_db_parameter_group](#input_create_db_parameter_group)                                                       | Determines whether a DB parameter should be created or use existing                                                                                                                                                                                                                                                                                                                                                                                                                                   | `bool`              | `false`                                                              |    no    |
| <a name="input_create_db_proxy"></a> [create_db_proxy](#input_create_db_proxy)                                                                                     | (Optional) Set this to true to create RDS Proxy.                                                                                                                                                                                                                                                                                                                                                                                                                                                      | `bool`              | `false`                                                              |    no    |
| <a name="input_create_monitoring_role"></a> [create_monitoring_role](#input_create_monitoring_role)                                                                | Determines whether to create the IAM role for RDS enhanced monitoring                                                                                                                                                                                                                                                                                                                                                                                                                                 | `bool`              | `true`                                                               |    no    |
| <a name="input_database_name"></a> [database_name](#input_database_name)                                                                                           | Name for an automatically created database on cluster creation                                                                                                                                                                                                                                                                                                                                                                                                                                        | `string`            | `""`                                                                 |    no    |
| <a name="input_db_cluster_db_instance_parameter_group_name"></a> [db_cluster_db_instance_parameter_group_name](#input_db_cluster_db_instance_parameter_group_name) | Instance parameter group to associate with all instances of the DB cluster. The `db_cluster_db_instance_parameter_group_name` is only valid in combination with `allow_major_version_upgrade`                                                                                                                                                                                                                                                                                                         | `string`            | `null`                                                               |    no    |
| <a name="input_db_cluster_instance_class"></a> [db_cluster_instance_class](#input_db_cluster_instance_class)                                                       | The compute and memory capacity of each DB instance in the Multi-AZ DB cluster, for example db.m6g.xlarge. Not all DB instance classes are available in all AWS Regions, or for all database engines                                                                                                                                                                                                                                                                                                  | `string`            | `null`                                                               |    no    |
| <a name="input_db_cluster_parameter_group_description"></a> [db_cluster_parameter_group_description](#input_db_cluster_parameter_group_description)                | The description of the DB cluster parameter group. Defaults to "Managed by Terraform"                                                                                                                                                                                                                                                                                                                                                                                                                 | `string`            | `null`                                                               |    no    |
| <a name="input_db_cluster_parameter_group_family"></a> [db_cluster_parameter_group_family](#input_db_cluster_parameter_group_family)                               | The family of the DB cluster parameter group                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`            | `""`                                                                 |    no    |
| <a name="input_db_cluster_parameter_group_name"></a> [db_cluster_parameter_group_name](#input_db_cluster_parameter_group_name)                                     | The name of the DB cluster parameter group                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `string`            | `null`                                                               |    no    |
| <a name="input_db_cluster_parameter_group_parameters"></a> [db_cluster_parameter_group_parameters](#input_db_cluster_parameter_group_parameters)                   | A list of DB cluster parameters to apply. Note that parameters may differ from a family to an other                                                                                                                                                                                                                                                                                                                                                                                                   | `list(map(string))` | `[]`                                                                 |    no    |
| <a name="input_db_parameter_group_description"></a> [db_parameter_group_description](#input_db_parameter_group_description)                                        | The description of the DB parameter group. Defaults to "Managed by Terraform"                                                                                                                                                                                                                                                                                                                                                                                                                         | `string`            | `null`                                                               |    no    |
| <a name="input_db_parameter_group_family"></a> [db_parameter_group_family](#input_db_parameter_group_family)                                                       | The family of the DB parameter group                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `string`            | `""`                                                                 |    no    |
| <a name="input_db_parameter_group_name"></a> [db_parameter_group_name](#input_db_parameter_group_name)                                                             | The name of the DB parameter group                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `string`            | `null`                                                               |    no    |
| <a name="input_db_parameter_group_parameters"></a> [db_parameter_group_parameters](#input_db_parameter_group_parameters)                                           | A list of DB parameters to apply. Note that parameters may differ from a family to an other                                                                                                                                                                                                                                                                                                                                                                                                           | `list(map(string))` | `[]`                                                                 |    no    |
| <a name="input_debug_logging"></a> [debug_logging](#input_debug_logging)                                                                                           | (Optional) Whether the proxy includes detailed information about SQL statements in its logs. This information helps you to debug issues involving SQL behavior or the performance and scalability of the proxy connections. The debug information includes the text of SQL statements that you submit through the proxy. Thus, only enable this setting when needed for debugging, and only when you have security measures in place to safeguard any sensitive information that appears in the logs. | `bool`              | `false`                                                              |    no    |
| <a name="input_deletion_protection"></a> [deletion_protection](#input_deletion_protection)                                                                         | If the DB instance should have deletion protection enabled. The database can't be deleted when this value is set to `true`. The default is `false`                                                                                                                                                                                                                                                                                                                                                    | `bool`              | `null`                                                               |    no    |
| <a name="input_egress_protocol"></a> [egress_protocol](#input_egress_protocol)                                                                                     | equal to 0. The supported values are defined in the IpProtocol argument on the IpPermission API reference                                                                                                                                                                                                                                                                                                                                                                                             | `number`            | `-1`                                                                 |    no    |
| <a name="input_egress_rule"></a> [egress_rule](#input_egress_rule)                                                                                                 | Enable to create egress rule                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `bool`              | `true`                                                               |    no    |
| <a name="input_enable"></a> [enable](#input_enable)                                                                                                                | Set to false to prevent the module from creating any resources.                                                                                                                                                                                                                                                                                                                                                                                                                                       | `bool`              | `true`                                                               |    no    |
| <a name="input_enable_default_proxy_iam_role"></a> [enable_default_proxy_iam_role](#input_enable_default_proxy_iam_role)                                           | (OPTIONAL) Set this to false to pass your own IAM Role for RDS Proxy.                                                                                                                                                                                                                                                                                                                                                                                                                                 | `bool`              | `true`                                                               |    no    |
| <a name="input_enable_global_write_forwarding"></a> [enable_global_write_forwarding](#input_enable_global_write_forwarding)                                        | Whether cluster should forward writes to an associated global cluster. Applied to secondary clusters to enable them to forward writes to an `aws_rds_global_cluster`'s primary cluster                                                                                                                                                                                                                                                                                                                | `bool`              | `null`                                                               |    no    |
| <a name="input_enable_http_endpoint"></a> [enable_http_endpoint](#input_enable_http_endpoint)                                                                      | Enable HTTP endpoint (data API). Only valid when engine_mode is set to `serverless`                                                                                                                                                                                                                                                                                                                                                                                                                   | `bool`              | `null`                                                               |    no    |
| <a name="input_enable_security_group"></a> [enable_security_group](#input_enable_security_group)                                                                   | Enable default Security Group with only Egress traffic allowed.                                                                                                                                                                                                                                                                                                                                                                                                                                       | `bool`              | `true`                                                               |    no    |
| <a name="input_enabled_cloudwatch_logs_exports"></a> [enabled_cloudwatch_logs_exports](#input_enabled_cloudwatch_logs_exports)                                     | Set of log types to export to cloudwatch. If omitted, no logs will be exported. The following log types are supported: `audit`, `error`, `general`, `slowquery`, `postgresql`                                                                                                                                                                                                                                                                                                                         | `list(string)`      | `[]`                                                                 |    no    |
| <a name="input_enabled_subnet_group"></a> [enabled_subnet_group](#input_enabled_subnet_group)                                                                      | Set to false to prevent the module from creating any resources.                                                                                                                                                                                                                                                                                                                                                                                                                                       | `bool`              | `true`                                                               |    no    |
| <a name="input_endpoints"></a> [endpoints](#input_endpoints)                                                                                                       | Map of additional cluster endpoints and their attributes to be created                                                                                                                                                                                                                                                                                                                                                                                                                                | `any`               | `{}`                                                                 |    no    |
| <a name="input_engine"></a> [engine](#input_engine)                                                                                                                | The name of the database engine to be used for this DB cluster. Defaults to `aurora`. Valid Values: `aurora`, `aurora-mysql`, `aurora-postgresql`                                                                                                                                                                                                                                                                                                                                                     | `string`            | `null`                                                               |    no    |
| <a name="input_engine_family"></a> [engine_family](#input_engine_family)                                                                                           | (Required, Forces new resource) The kinds of databases that the proxy can connect to. This value determines which database network protocol the proxy recognizes when it interprets network traffic to and from the database. For Aurora MySQL, RDS for MariaDB, and RDS for MySQL databases, specify MYSQL. For Aurora PostgreSQL and RDS for PostgreSQL databases, specify POSTGRESQL. For RDS for Microsoft SQL Server, specify SQLSERVER. Valid values are MYSQL, POSTGRESQL, and SQLSERVER.      | `string`            | `"POSTGRESQL"`                                                       |    no    |
| <a name="input_engine_mode"></a> [engine_mode](#input_engine_mode)                                                                                                 | The database engine mode. Valid values: `global`, `multimaster`, `parallelquery`, `provisioned`, `serverless`. Defaults to: `provisioned`                                                                                                                                                                                                                                                                                                                                                             | `string`            | `"provisioned"`                                                      |    no    |
| <a name="input_engine_version"></a> [engine_version](#input_engine_version)                                                                                        | The database engine version. Updating this argument results in an outage                                                                                                                                                                                                                                                                                                                                                                                                                              | `string`            | `null`                                                               |    no    |
| <a name="input_environment"></a> [environment](#input_environment)                                                                                                 | Environment (e.g. `prod`, `dev`, `staging`).                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`            | `""`                                                                 |    no    |
| <a name="input_final_snapshot_identifier"></a> [final_snapshot_identifier](#input_final_snapshot_identifier)                                                       | The name of your final DB snapshot when this DB cluster is deleted. If omitted, no final snapshot will be made                                                                                                                                                                                                                                                                                                                                                                                        | `string`            | `null`                                                               |    no    |
| <a name="input_from_port"></a> [from_port](#input_from_port)                                                                                                       | (Required) Start port (or ICMP type number if protocol is icmp or icmpv6).                                                                                                                                                                                                                                                                                                                                                                                                                            | `number`            | `0`                                                                  |    no    |
| <a name="input_global_cluster_identifier"></a> [global_cluster_identifier](#input_global_cluster_identifier)                                                       | The global cluster identifier specified on `aws_rds_global_cluster`                                                                                                                                                                                                                                                                                                                                                                                                                                   | `string`            | `null`                                                               |    no    |
| <a name="input_iam_database_authentication_enabled"></a> [iam_database_authentication_enabled](#input_iam_database_authentication_enabled)                         | Specifies whether or mappings of AWS Identity and Access Management (IAM) accounts to database accounts is enabled                                                                                                                                                                                                                                                                                                                                                                                    | `bool`              | `null`                                                               |    no    |
| <a name="input_iam_role_description"></a> [iam_role_description](#input_iam_role_description)                                                                      | Description of the monitoring role                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `string`            | `null`                                                               |    no    |
| <a name="input_iam_role_force_detach_policies"></a> [iam_role_force_detach_policies](#input_iam_role_force_detach_policies)                                        | Whether to force detaching any policies the monitoring role has before destroying it                                                                                                                                                                                                                                                                                                                                                                                                                  | `bool`              | `null`                                                               |    no    |
| <a name="input_iam_role_managed_policy_arns"></a> [iam_role_managed_policy_arns](#input_iam_role_managed_policy_arns)                                              | Set of exclusive IAM managed policy ARNs to attach to the monitoring role                                                                                                                                                                                                                                                                                                                                                                                                                             | `list(string)`      | `null`                                                               |    no    |
| <a name="input_iam_role_max_session_duration"></a> [iam_role_max_session_duration](#input_iam_role_max_session_duration)                                           | Maximum session duration (in seconds) that you want to set for the monitoring role                                                                                                                                                                                                                                                                                                                                                                                                                    | `number`            | `null`                                                               |    no    |
| <a name="input_iam_role_path"></a> [iam_role_path](#input_iam_role_path)                                                                                           | Path for the monitoring role                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`            | `null`                                                               |    no    |
| <a name="input_iam_role_permissions_boundary"></a> [iam_role_permissions_boundary](#input_iam_role_permissions_boundary)                                           | The ARN of the policy that is used to set the permissions boundary for the monitoring role                                                                                                                                                                                                                                                                                                                                                                                                            | `string`            | `null`                                                               |    no    |
| <a name="input_iam_roles"></a> [iam_roles](#input_iam_roles)                                                                                                       | Map of IAM roles and supported feature names to associate with the cluster                                                                                                                                                                                                                                                                                                                                                                                                                            | `map(map(string))`  | `{}`                                                                 |    no    |
| <a name="input_idle_client_timeout"></a> [idle_client_timeout](#input_idle_client_timeout)                                                                         | (Optional) The number of seconds that a connection to the proxy can be inactive before the proxy disconnects it. You can set this value higher or lower than the connection timeout limit for the associated database.                                                                                                                                                                                                                                                                                | `number`            | `1800`                                                               |    no    |
| <a name="input_init_query"></a> [init_query](#input_init_query)                                                                                                    | (Optional) One or more SQL statements for the proxy to run when opening each new database connection. Typically used with SET statements to make sure that each connection has identical settings such as time zone and character set. This setting is empty by default. For multiple statements, use semicolons as the separator. You can also include multiple variables in a single SET statement, such as SET x=1, y=2.                                                                           | `string`            | `""`                                                                 |    no    |
| <a name="input_instance_class"></a> [instance_class](#input_instance_class)                                                                                        | Instance type to use at master instance. Note: if `autoscaling_enabled` is `true`, this will be the same instance class used on instances created by autoscaling                                                                                                                                                                                                                                                                                                                                      | `string`            | `""`                                                                 |    no    |
| <a name="input_instance_timeouts"></a> [instance_timeouts](#input_instance_timeouts)                                                                               | Create, update, and delete timeout configurations for the cluster instance(s)                                                                                                                                                                                                                                                                                                                                                                                                                         | `map(string)`       | `{}`                                                                 |    no    |
| <a name="input_instances"></a> [instances](#input_instances)                                                                                                       | Map of cluster instances and any specific/overriding attributes to be created                                                                                                                                                                                                                                                                                                                                                                                                                         | `any`               | `{}`                                                                 |    no    |
| <a name="input_instances_use_identifier_prefix"></a> [instances_use_identifier_prefix](#input_instances_use_identifier_prefix)                                     | Determines whether cluster instance identifiers are used as prefixes                                                                                                                                                                                                                                                                                                                                                                                                                                  | `bool`              | `false`                                                              |    no    |
| <a name="input_iops"></a> [iops](#input_iops)                                                                                                                      | The amount of Provisioned IOPS (input/output operations per second) to be initially allocated for each DB instance in the Multi-AZ DB cluster                                                                                                                                                                                                                                                                                                                                                         | `number`            | `null`                                                               |    no    |
| <a name="input_ipv6_cidr_blocks"></a> [ipv6_cidr_blocks](#input_ipv6_cidr_blocks)                                                                                  | Enable to create egress rule                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `list(string)`      | <pre>[<br> "::/0"<br>]</pre>                                         |    no    |
| <a name="input_is_primary_cluster"></a> [is_primary_cluster](#input_is_primary_cluster)                                                                            | Determines whether cluster is primary cluster with writer instance (set to `false` for global cluster and replica clusters)                                                                                                                                                                                                                                                                                                                                                                           | `bool`              | `true`                                                               |    no    |
| <a name="input_kms_key_id"></a> [kms_key_id](#input_kms_key_id)                                                                                                    | The ARN for the KMS encryption key. When specifying `kms_key_id`, `storage_encrypted` needs to be set to `true`                                                                                                                                                                                                                                                                                                                                                                                       | `string`            | `null`                                                               |    no    |
| <a name="input_label_order"></a> [label_order](#input_label_order)                                                                                                 | Label order, e.g. `name`,`application`.                                                                                                                                                                                                                                                                                                                                                                                                                                                               | `list(any)`         | <pre>[<br> "name",<br> "environment"<br>]</pre>                      |    no    |
| <a name="input_manage_master_user_password"></a> [manage_master_user_password](#input_manage_master_user_password)                                                 | Set to true to allow RDS to manage the master user password in Secrets Manager. Cannot be set if `master_password` is provided                                                                                                                                                                                                                                                                                                                                                                        | `bool`              | `true`                                                               |    no    |
| <a name="input_managedby"></a> [managedby](#input_managedby)                                                                                                       | ManagedBy, eg 'opszero'.                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | `string`            | `"opszero"`                                                          |    no    |
| <a name="input_master_user_secret_kms_key_id"></a> [master_user_secret_kms_key_id](#input_master_user_secret_kms_key_id)                                           | The Amazon Web Services KMS key identifier is the key ARN, key ID, alias ARN, or alias name for the KMS key                                                                                                                                                                                                                                                                                                                                                                                           | `string`            | `null`                                                               |    no    |
| <a name="input_master_username"></a> [master_username](#input_master_username)                                                                                     | Username for the master DB user. Required unless `snapshot_identifier` or `replication_source_identifier` is provided or unless a `global_cluster_identifier` is provided when the cluster is the secondary cluster of a global database                                                                                                                                                                                                                                                              | `string`            | `null`                                                               |    no    |
| <a name="input_max_connections_percent"></a> [max_connections_percent](#input_max_connections_percent)                                                             | (Optional) The maximum size of the connection pool for each target in a target group. For Aurora MySQL, it is expressed as a percentage of the max_connections setting for the RDS DB instance or Aurora DB cluster used by the target group.                                                                                                                                                                                                                                                         | `number`            | `100`                                                                |    no    |
| <a name="input_max_idle_connections_percent"></a> [max_idle_connections_percent](#input_max_idle_connections_percent)                                              | (Optional) Controls how actively the proxy closes idle database connections in the connection pool. A high value enables the proxy to leave a high percentage of idle connections open. A low value causes the proxy to close idle client connections and return the underlying database connections to the connection pool. For Aurora MySQL, it is expressed as a percentage of the max_connections setting for the RDS DB instance or Aurora DB cluster used by the target group.                  | `number`            | `null`                                                               |    no    |
| <a name="input_monitoring_interval"></a> [monitoring_interval](#input_monitoring_interval)                                                                         | The interval, in seconds, between points when Enhanced Monitoring metrics are collected for instances. Set to `0` to disable. Default is `0`                                                                                                                                                                                                                                                                                                                                                          | `number`            | `0`                                                                  |    no    |
| <a name="input_monitoring_role_arn"></a> [monitoring_role_arn](#input_monitoring_role_arn)                                                                         | IAM role used by RDS to send enhanced monitoring metrics to CloudWatch                                                                                                                                                                                                                                                                                                                                                                                                                                | `string`            | `""`                                                                 |    no    |
| <a name="input_monitoring_role_name"></a> [monitoring_role_name](#input_monitoring_role_name)                                                                      | Name of the IAM role which will be created when create_monitoring_role is enabled.                                                                                                                                                                                                                                                                                                                                                                                                                    | `string`            | `"rds-monitoring-role"`                                              |    no    |
| <a name="input_mysql_iam_role_tags"></a> [mysql_iam_role_tags](#input_mysql_iam_role_tags)                                                                         | Additional tags for the mysql iam role                                                                                                                                                                                                                                                                                                                                                                                                                                                                | `map(any)`          | `{}`                                                                 |    no    |
| <a name="input_name"></a> [name](#input_name)                                                                                                                      | Name (e.g. `app` or `cluster`).                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `string`            | n/a                                                                  |   yes    |
| <a name="input_network_type"></a> [network_type](#input_network_type)                                                                                              | The type of network stack to use (IPV4 or DUAL)                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `string`            | `null`                                                               |    no    |
| <a name="input_performance_insights_enabled"></a> [performance_insights_enabled](#input_performance_insights_enabled)                                              | Specifies whether Performance Insights is enabled or not                                                                                                                                                                                                                                                                                                                                                                                                                                              | `bool`              | `null`                                                               |    no    |
| <a name="input_performance_insights_kms_key_id"></a> [performance_insights_kms_key_id](#input_performance_insights_kms_key_id)                                     | The ARN for the KMS key to encrypt Performance Insights data                                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`            | `null`                                                               |    no    |
| <a name="input_performance_insights_retention_period"></a> [performance_insights_retention_period](#input_performance_insights_retention_period)                   | Amount of time in days to retain Performance Insights data. Either 7 (7 days) or 731 (2 years)                                                                                                                                                                                                                                                                                                                                                                                                        | `number`            | `null`                                                               |    no    |
| <a name="input_port"></a> [port](#input_port)                                                                                                                      | The port on which the DB accepts connections                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`            | `null`                                                               |    no    |
| <a name="input_predefined_metric_type"></a> [predefined_metric_type](#input_predefined_metric_type)                                                                | The metric type to scale on. Valid values are `RDSReaderAverageCPUUtilization` and `RDSReaderAverageDatabaseConnections`                                                                                                                                                                                                                                                                                                                                                                              | `string`            | `"RDSReaderAverageCPUUtilization"`                                   |    no    |
| <a name="input_preferred_backup_window"></a> [preferred_backup_window](#input_preferred_backup_window)                                                             | The daily time range during which automated backups are created if automated backups are enabled using the `backup_retention_period` parameter. Time in UTC                                                                                                                                                                                                                                                                                                                                           | `string`            | `"02:00-03:00"`                                                      |    no    |
| <a name="input_preferred_maintenance_window"></a> [preferred_maintenance_window](#input_preferred_maintenance_window)                                              | The weekly time range during which system maintenance can occur, in (UTC)                                                                                                                                                                                                                                                                                                                                                                                                                             | `string`            | `"sun:05:00-sun:06:00"`                                              |    no    |
| <a name="input_protocol"></a> [protocol](#input_protocol)                                                                                                          | The protocol. If not icmp, tcp, udp, or all use the.                                                                                                                                                                                                                                                                                                                                                                                                                                                  | `string`            | `"tcp"`                                                              |    no    |
| <a name="input_proxy_endpoints"></a> [proxy_endpoints](#input_proxy_endpoints)                                                                                     | Map of DB proxy endpoints to create and their attributes (see `aws_db_proxy_endpoint`)                                                                                                                                                                                                                                                                                                                                                                                                                | `any`               | `{}`                                                                 |    no    |
| <a name="input_proxy_iam_role_description"></a> [proxy_iam_role_description](#input_proxy_iam_role_description)                                                    | Description of the monitoring role                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | `string`            | `null`                                                               |    no    |
| <a name="input_proxy_iam_role_path"></a> [proxy_iam_role_path](#input_proxy_iam_role_path)                                                                         | Path for the monitoring role                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`            | `null`                                                               |    no    |
| <a name="input_proxy_role_arn"></a> [proxy_role_arn](#input_proxy_role_arn)                                                                                        | (OPTIONAL) ARN of RDS proxy IAM Role. Can only be set when `enable_default_proxy_iam_role` is set to `false`.                                                                                                                                                                                                                                                                                                                                                                                         | `string`            | `""`                                                                 |    no    |
| <a name="input_proxy_sg_ids"></a> [proxy_sg_ids](#input_proxy_sg_ids)                                                                                              | (Optional) One or more VPC security group IDs to associate with the new proxy.                                                                                                                                                                                                                                                                                                                                                                                                                        | `list(string)`      | `[]`                                                                 |    no    |
| <a name="input_proxy_subnet_ids"></a> [proxy_subnet_ids](#input_proxy_subnet_ids)                                                                                  | (Required) One or more VPC subnet IDs to associate with the new proxy.                                                                                                                                                                                                                                                                                                                                                                                                                                | `list(string)`      | `[]`                                                                 |    no    |
| <a name="input_publicly_accessible"></a> [publicly_accessible](#input_publicly_accessible)                                                                         | Determines whether instances are publicly accessible. Default `false`                                                                                                                                                                                                                                                                                                                                                                                                                                 | `bool`              | `false`                                                              |    no    |
| <a name="input_replication_source_identifier"></a> [replication_source_identifier](#input_replication_source_identifier)                                           | ARN of a source DB cluster or DB instance if this DB cluster is to be created as a Read Replica                                                                                                                                                                                                                                                                                                                                                                                                       | `string`            | `null`                                                               |    no    |
| <a name="input_repository"></a> [repository](#input_repository)                                                                                                    | Terraform current module repo                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | `string`            | `"https://github.com/opszero/terraform-aws-aurora"`                  |    no    |
| <a name="input_require_tls"></a> [require_tls](#input_require_tls)                                                                                                 | (Optional) A Boolean parameter that specifies whether Transport Layer Security (TLS) encryption is required for connections to the proxy. By enabling this setting, you can enforce encrypted TLS connections to the proxy.                                                                                                                                                                                                                                                                           | `bool`              | `false`                                                              |    no    |
| <a name="input_restore_to_point_in_time"></a> [restore_to_point_in_time](#input_restore_to_point_in_time)                                                          | Map of nested attributes for cloning Aurora cluster                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `map(string)`       | `{}`                                                                 |    no    |
| <a name="input_s3_import"></a> [s3_import](#input_s3_import)                                                                                                       | Configuration map used to restore from a Percona Xtrabackup in S3 (only MySQL is supported)                                                                                                                                                                                                                                                                                                                                                                                                           | `map(string)`       | `{}`                                                                 |    no    |
| <a name="input_scaling_configuration"></a> [scaling_configuration](#input_scaling_configuration)                                                                   | Map of nested attributes with scaling properties. Only valid when `engine_mode` is set to `serverless`                                                                                                                                                                                                                                                                                                                                                                                                | `map(string)`       | `{}`                                                                 |    no    |
| <a name="input_serverlessv2_scaling_configuration"></a> [serverlessv2_scaling_configuration](#input_serverlessv2_scaling_configuration)                            | Map of nested attributes with serverless v2 scaling properties. Only valid when `engine_mode` is set to `provisioned`                                                                                                                                                                                                                                                                                                                                                                                 | `map(string)`       | `{}`                                                                 |    no    |
| <a name="input_session_pinning_filters"></a> [session_pinning_filters](#input_session_pinning_filters)                                                             | (Optional) Each item in the list represents a class of SQL operations that normally cause all later statements in a session using a proxy to be pinned to the same underlying database connection. Including an item in the list exempts that class of SQL operations from the pinning behavior. Currently, the only allowed value is EXCLUDE_VARIABLE_SETS.                                                                                                                                          | `list(string)`      | `[]`                                                                 |    no    |
| <a name="input_sg_description"></a> [sg_description](#input_sg_description)                                                                                        | The security group description.                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `string`            | `"Instance default security group (only egress access is allowed)."` |    no    |
| <a name="input_sg_egress_description"></a> [sg_egress_description](#input_sg_egress_description)                                                                   | Description of the egress and ingress rule                                                                                                                                                                                                                                                                                                                                                                                                                                                            | `string`            | `"Description of the rule."`                                         |    no    |
| <a name="input_sg_egress_ipv6_description"></a> [sg_egress_ipv6_description](#input_sg_egress_ipv6_description)                                                    | Description of the egress_ipv6 rule                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | `string`            | `"Description of the rule."`                                         |    no    |
| <a name="input_sg_ids"></a> [sg_ids](#input_sg_ids)                                                                                                                | of the security group id.                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | `list(any)`         | `[]`                                                                 |    no    |
| <a name="input_sg_ingress_description"></a> [sg_ingress_description](#input_sg_ingress_description)                                                                | Description of the ingress rule                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | `string`            | `"Description of the ingress rule use elasticache."`                 |    no    |
| <a name="input_skip_final_snapshot"></a> [skip_final_snapshot](#input_skip_final_snapshot)                                                                         | Determines whether a final snapshot is created before the cluster is deleted. If true is specified, no snapshot is created                                                                                                                                                                                                                                                                                                                                                                            | `bool`              | `false`                                                              |    no    |
| <a name="input_snapshot_identifier"></a> [snapshot_identifier](#input_snapshot_identifier)                                                                         | Specifies whether or not to create this cluster from a snapshot. You can use either the name or ARN when specifying a DB cluster snapshot, or the ARN when specifying a DB snapshot                                                                                                                                                                                                                                                                                                                   | `string`            | `null`                                                               |    no    |
| <a name="input_source_region"></a> [source_region](#input_source_region)                                                                                           | The source region for an encrypted replica DB cluster                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `string`            | `null`                                                               |    no    |
| <a name="input_storage_encrypted"></a> [storage_encrypted](#input_storage_encrypted)                                                                               | Specifies whether the DB cluster is encrypted. The default is `true`                                                                                                                                                                                                                                                                                                                                                                                                                                  | `bool`              | `true`                                                               |    no    |
| <a name="input_storage_type"></a> [storage_type](#input_storage_type)                                                                                              | Specifies the storage type to be associated with the DB cluster. (This setting is required to create a Multi-AZ DB cluster). Valid values: `io1`, Default: `io1`                                                                                                                                                                                                                                                                                                                                      | `string`            | `null`                                                               |    no    |
| <a name="input_subnets"></a> [subnets](#input_subnets)                                                                                                             | List of subnet IDs used by database subnet group created                                                                                                                                                                                                                                                                                                                                                                                                                                              | `list(string)`      | `[]`                                                                 |    no    |
| <a name="input_tags"></a> [tags](#input_tags)                                                                                                                      | A map of tags to add to all resources                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | `map(string)`       | `{}`                                                                 |    no    |
| <a name="input_to_port"></a> [to_port](#input_to_port)                                                                                                             | equal to 0. The supported values are defined in the IpProtocol argument on the IpPermission API reference                                                                                                                                                                                                                                                                                                                                                                                             | `number`            | `65535`                                                              |    no    |
| <a name="input_vpc_id"></a> [vpc_id](#input_vpc_id)                                                                                                                | ID of the VPC where to create security group                                                                                                                                                                                                                                                                                                                                                                                                                                                          | `string`            | `""`                                                                 |    no    |
| <a name="input_vpc_security_group_ids"></a> [vpc_security_group_ids](#input_vpc_security_group_ids)                                                                | List of VPC security groups to associate to the cluster in addition to the security group created                                                                                                                                                                                                                                                                                                                                                                                                     | `list(string)`      | `[]`                                                                 |    no    |

## Outputs

| Name                                                                                                                                                  | Description                                                                                                                                                          |
| ----------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <a name="output_additional_cluster_endpoints"></a> [additional_cluster_endpoints](#output_additional_cluster_endpoints)                               | A map of additional cluster endpoints and their attributes                                                                                                           |
| <a name="output_cluster_arn"></a> [cluster_arn](#output_cluster_arn)                                                                                  | Amazon Resource Name (ARN) of cluster                                                                                                                                |
| <a name="output_cluster_database_name"></a> [cluster_database_name](#output_cluster_database_name)                                                    | Name for an automatically created database on cluster creation                                                                                                       |
| <a name="output_cluster_endpoint"></a> [cluster_endpoint](#output_cluster_endpoint)                                                                   | Writer endpoint for the cluster                                                                                                                                      |
| <a name="output_cluster_engine_version_actual"></a> [cluster_engine_version_actual](#output_cluster_engine_version_actual)                            | The running version of the cluster database                                                                                                                          |
| <a name="output_cluster_hosted_zone_id"></a> [cluster_hosted_zone_id](#output_cluster_hosted_zone_id)                                                 | The Route53 Hosted Zone ID of the endpoint                                                                                                                           |
| <a name="output_cluster_id"></a> [cluster_id](#output_cluster_id)                                                                                     | The RDS Cluster Identifier                                                                                                                                           |
| <a name="output_cluster_instances"></a> [cluster_instances](#output_cluster_instances)                                                                | A map of cluster instances and their attributes                                                                                                                      |
| <a name="output_cluster_master_password"></a> [cluster_master_password](#output_cluster_master_password)                                              | The database master password                                                                                                                                         |
| <a name="output_cluster_master_user_secret"></a> [cluster_master_user_secret](#output_cluster_master_user_secret)                                     | The generated database master user secret when `manage_master_user_password` is set to `true`                                                                        |
| <a name="output_cluster_master_username"></a> [cluster_master_username](#output_cluster_master_username)                                              | The database master username                                                                                                                                         |
| <a name="output_cluster_members"></a> [cluster_members](#output_cluster_members)                                                                      | List of RDS Instances that are a part of this cluster                                                                                                                |
| <a name="output_cluster_port"></a> [cluster_port](#output_cluster_port)                                                                               | The database port                                                                                                                                                    |
| <a name="output_cluster_reader_endpoint"></a> [cluster_reader_endpoint](#output_cluster_reader_endpoint)                                              | A read-only endpoint for the cluster, automatically load-balanced across replicas                                                                                    |
| <a name="output_cluster_resource_id"></a> [cluster_resource_id](#output_cluster_resource_id)                                                          | The RDS Cluster Resource ID                                                                                                                                          |
| <a name="output_cluster_role_associations"></a> [cluster_role_associations](#output_cluster_role_associations)                                        | A map of IAM roles associated with the cluster and their attributes                                                                                                  |
| <a name="output_db_cluster_parameter_group_arn"></a> [db_cluster_parameter_group_arn](#output_db_cluster_parameter_group_arn)                         | The ARN of the DB cluster parameter group created                                                                                                                    |
| <a name="output_db_cluster_parameter_group_id"></a> [db_cluster_parameter_group_id](#output_db_cluster_parameter_group_id)                            | The ID of the DB cluster parameter group created                                                                                                                     |
| <a name="output_db_parameter_group_arn"></a> [db_parameter_group_arn](#output_db_parameter_group_arn)                                                 | The ARN of the DB parameter group created                                                                                                                            |
| <a name="output_db_parameter_group_id"></a> [db_parameter_group_id](#output_db_parameter_group_id)                                                    | The ID of the DB parameter group created                                                                                                                             |
| <a name="output_enhanced_monitoring_iam_role_arn"></a> [enhanced_monitoring_iam_role_arn](#output_enhanced_monitoring_iam_role_arn)                   | The Amazon Resource Name (ARN) specifying the enhanced monitoring role                                                                                               |
| <a name="output_enhanced_monitoring_iam_role_name"></a> [enhanced_monitoring_iam_role_name](#output_enhanced_monitoring_iam_role_name)                | The name of the enhanced monitoring role                                                                                                                             |
| <a name="output_enhanced_monitoring_iam_role_unique_id"></a> [enhanced_monitoring_iam_role_unique_id](#output_enhanced_monitoring_iam_role_unique_id) | Stable and unique string identifying the enhanced monitoring role                                                                                                    |
| <a name="output_proxy_arn"></a> [proxy_arn](#output_proxy_arn)                                                                                        | The Amazon Resource Name (ARN) for the proxy                                                                                                                         |
| <a name="output_proxy_default_target_group_arn"></a> [proxy_default_target_group_arn](#output_proxy_default_target_group_arn)                         | The Amazon Resource Name (ARN) for the default target group                                                                                                          |
| <a name="output_proxy_default_target_group_id"></a> [proxy_default_target_group_id](#output_proxy_default_target_group_id)                            | The ID for the default target group                                                                                                                                  |
| <a name="output_proxy_default_target_group_name"></a> [proxy_default_target_group_name](#output_proxy_default_target_group_name)                      | The name of the default target group                                                                                                                                 |
| <a name="output_proxy_endpoint"></a> [proxy_endpoint](#output_proxy_endpoint)                                                                         | The endpoint that you can use to connect to the proxy                                                                                                                |
| <a name="output_proxy_iam_policy_name"></a> [proxy_iam_policy_name](#output_proxy_iam_policy_name)                                                    | The name of the policy attached to RDS Proxy IAM Role.                                                                                                               |
| <a name="output_proxy_iam_role_arn"></a> [proxy_iam_role_arn](#output_proxy_iam_role_arn)                                                             | Amazon Resource Name (ARN) specifying the RDS Proxy role.                                                                                                            |
| <a name="output_proxy_iam_role_name"></a> [proxy_iam_role_name](#output_proxy_iam_role_name)                                                          | Name of the RDS Proxy IAM Role.                                                                                                                                      |
| <a name="output_proxy_iam_role_unique_id"></a> [proxy_iam_role_unique_id](#output_proxy_iam_role_unique_id)                                           | Stable and unique string identifying the RDS Proxy role.                                                                                                             |
| <a name="output_proxy_id"></a> [proxy_id](#output_proxy_id)                                                                                           | The ID of the rds proxy                                                                                                                                              |
| <a name="output_proxy_name"></a> [proxy_name](#output_proxy_name)                                                                                     | Identifier representing the DB Instance or DB Cluster target                                                                                                         |
| <a name="output_proxy_target_endpoint"></a> [proxy_target_endpoint](#output_proxy_target_endpoint)                                                    | Hostname for the target RDS DB Instance. Only returned for `RDS_INSTANCE` type                                                                                       |
| <a name="output_proxy_target_id"></a> [proxy_target_id](#output_proxy_target_id)                                                                      | Identifier of `db_proxy_name`, `target_group_name`, target type (e.g. `RDS_INSTANCE` or `TRACKED_CLUSTER`), and resource identifier separated by forward slashes (/) |
| <a name="output_proxy_target_port"></a> [proxy_target_port](#output_proxy_target_port)                                                                | Port for the target RDS DB Instance or Aurora DB Cluster                                                                                                             |
| <a name="output_proxy_target_target_arn"></a> [proxy_target_target_arn](#output_proxy_target_target_arn)                                              | Amazon Resource Name (ARN) for the DB instance or DB cluster. Currently not returned by the RDS API                                                                  |
| <a name="output_proxy_target_tracked_cluster_id"></a> [proxy_target_tracked_cluster_id](#output_proxy_target_tracked_cluster_id)                      | DB Cluster identifier for the DB Instance target. Not returned unless manually importing an RDS_INSTANCE target that is part of a DB Cluster                         |
| <a name="output_proxy_target_type"></a> [proxy_target_type](#output_proxy_target_type)                                                                | Type of target. e.g. `RDS_INSTANCE` or `TRACKED_CLUSTER`                                                                                                             |
| <a name="output_security_group_id"></a> [security_group_id](#output_security_group_id)                                                                | The security group ID of the cluster                                                                                                                                 |

<!-- END_TF_DOCS -->
